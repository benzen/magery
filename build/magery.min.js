var Magery=function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={exports:{},id:n,loaded:false};e[n].call(a.exports,a,a.exports,r);a.loaded=true;return a.exports}r.m=e;r.c=t;r.p="";return r(0)}([function(e,t,r){"use strict";var n=r(1);var a=r(2);var i=r(4);var s=r(7);function u(e,t,r,n){this.node=e;this.template=t;this.context=r;this.handlers=n}u.prototype.trigger=function(e){var t=Array.prototype.slice.call(arguments,1);return this.applyHandler(e,t)};u.prototype.applyHandler=function(e,t){var r=this.update_queued;this.update_queued=true;this.handlers[e].apply(this,t);if(!r){this.update()}};t.bind=function(e,t,r,n){if(typeof e==="string"){e=document.getElementById(e)}var s=new u(e,t,r,n);var o=new i.Patcher(e);var l=new a.Renderer(o,s);s.update=function(){l.render(this.template,this.context,null);this.update_queued=false};s.update();return s};t.BoundTemplate=u;t.initTemplates=s.initTemplates},function(e,t){function r(e,t){t=t||new Set;var r=true;var s=new Proxy(e,{get:function(e,n,a){switch(n){case".dirty":return r;case".parents":return t;default:return e[n]}},set:function(e,i,u,l){switch(i){case".dirty":r=u;break;case".parents":t=u;break;default:if(n(u)){a(u,s)}e[i]=u;o(s)}return true},deleteProperty:function(e,t){switch(t){case".dirty":return false;case".parents":return false;default:var r=e[t];if(n(r)){i(r,s)}delete e[t];o(s);return true}}});return s}function n(e){return typeof e==="object"&&e[".parents"]}function a(e,t){return e[".parents"].add(t)}function i(e,t){return e[".parents"].delete(t)}function s(e){return e[".dirty"]}function u(e){if(s(e)){e[".dirty"]=false;for(var t in e){var r=e[t];if(n(r)){u(r)}}}}function o(e){if(!s(e)){e[".dirty"]=true;e[".parents"].forEach(o)}}function l(e,t,i){i=i||new WeakMap;if(typeof e==="object"){if(n(e)){if(!s(e)){return e}}else{if(i.has(e)){e=i.get(e)}else{var u=e;e=r(u);i.set(u,e)}if(t){a(e,t)}}for(var o in e){e[o]=l(e[o],e,i)}}return e}t.isDirty=s;t.toContext=l;t.markClean=u},function(e,t,r){var n=r(3);function a(e,t){this.bound_template=t;this.patcher=e;this.text_buffer=null}a.prototype.render=function(e,t,r){this.patcher.start();this.renderTemplate(e,t,r,null);this.flushText();this.patcher.end(t)};a.prototype.renderTemplate=function(e,t,r,n){var a=document.getElementById(e);if(!a){throw new Error("Template not found: '"+e+"'")}if(!a.content.initialized){throw new Error("Template '"+e+"' has not been initialized, "+"call Magery.initTemplates() first")}this.children(a.content,t,r,n)};a.prototype.each=function(e,t,r,a){var i=e._each_name;var s=n.lookup(t,e._each_iterable);for(var u=0,o=s.length;u<o;u++){var l=s[u];var c=Object.assign({},t);c[i]=l;this.element(e,c,r)}};a.prototype.child=function(e,t,r,a){if(n.isTextNode(e)){return this.text(e,t)}else if(n.isElementNode(e)){if(e._template_call){return this.templateCall(e,t,r,a)}else if(e._template_children){return a()}else if(e._each_name){return this.each(e,t,r,a)}else{return this.element(e,t,r,a)}}};a.prototype.children=function(e,t,r,a){var i=this;n.eachNode(e.childNodes,function(e){i.child(e,t,r,a)})};a.prototype.flushText=function(){if(this.text_buffer){this.patcher.text(this.text_buffer);this.text_buffer=null}};function i(e){if(Array.isArray(e)){return e.length>0}return e}a.prototype.element=function(e,t,r,a){var s,u;if(e._if){s=e._if;u=n.lookup(t,s);if(!i(u)){return}}if(e._unless){s=e._unless;u=n.lookup(t,s);if(i(u)){return}}this.flushText();var o=null;if(e._key){o=this.expandVars(e._key,t)}this.patcher.enterTag(e.tagName,o);for(var l=0,c=e.attributes.length;l<c;l++){var f=e.attributes[l];var h=f.name;if(h[0]=="o"&&h[1]=="n"){this.patcher.eventListener(h.substr(2),f.value,t,this.bound_template)}else{this.patcher.attribute(h,this.expandVars(f.value,t))}}this.children(e,t,r,a);this.flushText();this.patcher.exitTag()};a.prototype.expandVars=function(e,t){return e.replace(/{{\s*([^}]+?)\s*}}/g,function(e,r){return n.lookup(t,n.propertyPath(r))})};a.prototype.text=function(e,t){var r=this.expandVars(e.textContent,t);if(!this.text_buffer){this.text_buffer=r}else{this.text_buffer+=r}};a.prototype.templateCall=function(e,t,r,a){var i=e.getAttribute("template");if(!i){throw new Error("<template-call> tags must include a 'template' attribute")}var s=this.expandVars(i,t);var u={};for(var o=0,l=e.attributes.length;o<l;o++){var c=e.attributes[o].name;if(c!=="template"){var f=n.propertyPath(e.attributes[o].value);var h=n.lookup(t,f);u[c]=h}}var p=this;this.renderTemplate(s,u,r,function(){p.children(e,t,r,a)})};t.Renderer=a},function(e,t){var r=1;var n=3;var a=11;t.isDocumentFragment=function(e){return e.nodeType===a};t.isElementNode=function(e){return e.nodeType===r};t.isTextNode=function(e){return e.nodeType===n};t.eachNode=function(e,t){var r=0;var n=e[0];while(n){var a=n;n=n.nextSibling;t(a,r++,e)}};t.mapNodes=function(e,r){var n=[];t.eachNode(e,function(t,a){n[a]=r(t,a,e)});return n};t.propertyPath=function(e){return e.split(".").filter(function(e){return e})};t.lookup=function(e,t){var r=e;for(var n=0,a=t.length;n<a;n++){if(r===undefined||r===null){return""}r=r[t[n]]}return r===undefined||r===null?"":r};t.isTemplateTag=function(e){return/^TEMPLATE-/.test(e.tagName)};t.templateTagName=function(e){if(e._template_tag){return e._template_tag}var t=/^TEMPLATE-([^\s/>]+)/.exec(e.tagName);if(!t){throw new Error("Not a template tag: "+e.tagName)}e._template_tag=t[1].toLowerCase();return e._template_tag}},function(module,exports,__webpack_require__){var utils=__webpack_require__(3);var transforms=__webpack_require__(5);var Set=__webpack_require__(6);var ELEMENT_NODE=1;var TEXT_NODE=3;function matches(e,t,r){return(e.tagName===t||e.nodeType===TEXT_NODE&&t==="#text")&&e.key==r}function align(e,t,r,n){if(t&&matches(t,r,n)){return t}if(n&&e.keymap){return e.keymap[n]||null}return null}function deleteChildren(e,t,r){while(r){var n=r;r=r.nextSibling;e.removeChild(t,n)}}function getAttributes(e){var t=e.attributes;if(e.checked){t=Array.prototype.slice.call(t);t.push({name:"checked",value:e.checked})}return t}function deleteUnvisitedAttributes(e,t){var r=getAttributes(t);var n=[];var a,i;for(a=0,i=r.length;a<i;a++){var s=r[a];if(!t.visited_attributes.has(s.name)){n.push(s.name)}}for(a=0,i=n.length;a<i;a++){e.removeAttribute(t,n[a]);if(n[a]==="value"){e.removeEventListener(t,"input",resetInput)}}}function deleteUnvisitedEvents(e,t){if(!t.event_handlers){return}for(var r in t.event_handlers){if(!t.visited_events.has(r)){e.removeEventListener(t,r,t.event_handlers[r]);delete t.event_handlers[r]}}}function Patcher(e,t){this.container=e;this.parent=null;this.current=null;this.transforms=t||transforms}exports.Patcher=Patcher;Patcher.prototype.start=function(){this.stepInto(this.container)};Patcher.prototype.stepInto=function(e){e.visited_attributes=new Set;e.visited_events=new Set;this.parent=e;this.current=e.firstChild};Patcher.prototype.enterTag=function(e,t){var r=align(this.parent,this.current,e,t);if(!r){r=this.transforms.insertElement(this.parent,this.current,e);if(t){if(!this.parent.keymap){this.parent.keymap={}}this.parent.keymap[t]=r;r.key=t}}else if(!this.current){this.transforms.appendChild(this.parent,r)}else if(r!==this.current){this.transforms.replaceChild(this.parent,r,this.current)}this.stepInto(r)};function getListener(e,t){return e.event_handlers&&e.event_handlers[t]}function setListener(e,t,r,n){e.addEventListener(t,r,n);t.visited_events.add(r);if(!t.event_handlers){t.event_handlers={}}t.event_handlers[r]=n}function replaceListener(e,t,r,n){var a=getListener(t,r);if(a){e.removeEventListener(t,r,a)}setListener(e,t,r,n)}Patcher.prototype.eventListener=function(type,value,data,bound_template){var start=value.indexOf("(");var end=value.lastIndexOf(")");var name=value.substring(0,start);var src="["+value.substring(start+1,end)+"]";var container=this.container;var f=function(event){if(start!==-1){with(data){var args=eval(src)}bound_template.applyHandler(name,args)}var node=event.target;if(node.tagName==="INPUT"){var nodeType=node.getAttribute("type");if(type=="change"){if(nodeType==="checkbox"){resetCheckbox(event)}else if(nodeType==="radio"){resetRadio(event)}}else if(type=="input"&&node.hasAttribute("value")){resetInput(event)}}else if(node.tagName==="SELECT"){resetSelected(event)}};replaceListener(this.transforms,this.parent,type,f)};function resetCheckbox(e){var t=e.target;if(t.dataset["managed"]==="true"){t.checked=t.hasAttribute("checked")}}function resetRadio(e){var t=e.target;if(t.dataset["managed"]==="true"){var r=t.hasAttribute("checked");if(t.checked!=r){if(t.name){var n=document.getElementsByName(t.name);for(var a=0,i=n.length;a<i;a++){var s=n[a];s.checked=s.hasAttribute("checked")}}else{t.checked=r}}}}function resetSelected(e){var t=e.target;if(t.dataset["managed"]==="true"){var r=t.getElementsByTagName("option");for(var n=0,a=r.length;n<a;n++){var i=r[n];i.selected=i.hasAttribute("selected")}}}function resetInput(e){var t=e.target;if(t.dataset["managed"]==="true"){var r=t.getAttribute("value");if(t.value!==r){t.value=r}}}Patcher.prototype.attribute=function(e,t){var r=this.parent;if(r.getAttribute(e)!==t){this.transforms.setAttribute(r,e,t)}r.visited_attributes.add(e)};Patcher.prototype.text=function(e){var t=align(this.parent,this.current,"#text",null);if(!t){t=this.transforms.insertTextNode(this.parent,this.current,e)}else if(t.textContent!==e){this.transforms.replaceText(t,e)}this.current=t.nextSibling};Patcher.prototype.exitTag=function(){deleteChildren(this.transforms,this.parent,this.current);var e=this.parent;this.parent=e.parentNode;this.current=e.nextSibling;deleteUnvisitedAttributes(this.transforms,e);deleteUnvisitedEvents(this.transforms,e);if(e.tagName==="INPUT"){var t=e.getAttribute("type");if(t==="checkbox"&&!getListener(e,"change")){setListener(this.transforms,e,"change",resetCheckbox)}else if(t==="radio"&&!getListener(e,"change")){setListener(this.transforms,e,"change",resetRadio)}else if(e.hasAttribute("value")&&!getListener(e,"input")){setListener(this.transforms,e,"input",resetInput)}}else if(e.tagName==="SELECT"){setListener(this.transforms,e,"change",resetSelected)}};Patcher.prototype.skip=function(e,t){var r=align(this.parent,this.current,e,t);if(!this.current){this.transforms.appendChild(this.parent,r)}else if(r!==this.current){this.transforms.replaceChild(this.parent,r,this.current)}this.current=r.nextSibling};Patcher.prototype.end=function(e){deleteChildren(this.transforms,this.parent,this.current);this.parent=null}},function(e,t){t.insertTextNode=function(e,t,r){var n=document.createTextNode(r);e.insertBefore(n,t);return n};t.replaceText=function(e,t){e.textContent=t;return e};t.replaceChild=function(e,t,r){e.replaceChild(t,r);return t};t.appendChild=function(e,t){e.appendChild(t);return t};t.insertElement=function(e,t,r){var n=document.createElement(r);e.insertBefore(n,t);return n};t.removeChild=function(e,t){e.removeChild(t);return t};t.setAttribute=function(e,t,r){switch(t){case"checked":e.checked=true;break;case"selected":e.selected=true;break;case"value":e.value=r;break;case"autofocus":e.focus();break}e.setAttribute(t,r);return e};t.removeAttribute=function(e,t){switch(t){case"checked":e.checked=false;break;case"selected":e.selected=false;break;case"value":e.value="";break;case"autofocus":e.blur();break}e.removeAttribute(t);return e};t.addEventListener=function(e,t,r){e.addEventListener(t,r,false);return e};t.removeEventListener=function(e,t,r){e.removeEventListener(t,r);return e}},function(e,t){function r(){this.values=[]}r.prototype.add=function(e){this.values.push(e)};r.prototype.has=function(e){return this.values.indexOf(e)!==-1};e.exports=window.Set||r},function(e,t,r){var n=r(3);t.markPath=function(e,t){switch(t.length){case 0:return;case 1:e[t[0]]=true;return;default:for(var r=0,n=t.length-2;r<n;r++){var a=t[r];if(e[a]===true){return}if(e[a]===undefined){e[a]={}}e=e[a]}if(e[t[r]]){e[t[r]]=true}else{var i={};i[t[r+1]]=true;e[t[r]]=i}}};t.mergePaths=function(e,r){for(var n in r){if(e[n]===true){continue}else if(r[n]===true){e[n]=true}else if(!e[n]){e[n]=r[n]}else{if(Object.keys(e[n])[0]==Object.keys(r[n])[0]){t.mergePaths(e[n],r[n])}else{e[n]=true}}}};t.equivalentPathObjects=function(e,r){var n=Object.keys(e);var a=Object.keys(r);if(n.length!==a.length){return false}n.sort();a.sort();for(var i=n.length-1;i>=0;i--){if(n[i]!==a[i]){return false}}for(i=n.length-1;i>=0;i--){var s=n[i];var u=e[s];var o=r[s];if(u===true&&o===true){continue}else if(u===true||o===true){return false}else if(!t.equivalentPathObjects(e[s],r[s])){return false}}return true};t.stringPaths=function(e){var r={};var a=e.match(/{{\s*([^}]+?)\s*}}/g);if(a){a.forEach(function(e){t.markPath(r,n.propertyPath(e.replace(/^{{\s*|\s*}}$/g,"")))})}return r};function a(e,r){var a=false;var i=n.mapNodes(r.childNodes,o);for(var s=0,u=i.length;s<u;s++){var l=i[s];if(!l){a=true;break}t.mergePaths(e,l)}n.eachNode(r.childNodes,function(r,n){var s=i[n];if(s&&Object.keys(s).length===0){r.static=true}else if(a||!t.equivalentPathObjects(s,e)){r.active_paths=s}});return a?false:e}t.elementPaths=function(e){var r={};var i=null;var s;if(e.attributes){for(var u=0,o=e.attributes.length;u<o;u++){var l=e.attributes[u];if(l.name=="data-each"){var c=l.value.split(" in ");if(c.length<2){throw new Error("Badly formed data-each attribute value: "+l.value)}s=n.propertyPath(c[1]);t.markPath(r,s);i=c[0];e._each_name=c[0];e._each_iterable=s}if(l.name=="data-if"){s=n.propertyPath(l.value);t.markPath(r,s);e._if=s}else if(l.name=="data-unless"){s=n.propertyPath(l.value);t.markPath(r,s);e._unless=s}else if(l.name=="data-key"){t.mergePaths(r,t.stringPaths(l.value));e._key=l.value}else{t.mergePaths(r,t.stringPaths(l.value))}}e.removeAttribute("data-each");e.removeAttribute("data-if");e.removeAttribute("data-unless");e.removeAttribute("data-key")}r=a(r,e);if(i){delete r[i]}return r};function i(e){var r={};for(var i=0,s=e.attributes.length;i<s;i++){var u=e.attributes[i];if(u.name==="template"){t.mergePaths(r,t.stringPaths(u.value));e._template_call=u.value}else{t.markPath(r,n.propertyPath(u.value))}}r=a(r,e);return r}function s(e){e._template_children=true;return false}var u={call:i,children:s};function o(e){if(n.isTextNode(e)){return t.stringPaths(e.textContent)}else if(n.isTemplateTag(e)){var r=n.templateTagName(e);var a=u[r];if(!a){throw new Error("Unknown template tag: "+e.tagName)}return a(e)}else if(n.isElementNode(e)||n.isDocumentFragment(e)){return t.elementPaths(e)}return false}t.initTemplates=function(){var e=document.getElementsByTagName("template");for(var t=0,r=e.length;t<r;t++){var n=e[t].content;var a=o(n);n.static=a&&Object.keys(a).length===0;n.active_paths=a;n.initialized=true}}}]);