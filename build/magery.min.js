var Magery=function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={exports:{},id:n,loaded:false};t[n].call(a.exports,a,a.exports,r);a.loaded=true;return a.exports}r.m=t;r.c=e;r.p="";return r(0)}([function(t,e,r){var n=r(1);var a=r(6);var i=r(7);function u(t,e,r,n){this.node=t;this.template=e;this.data=r;this.handlers=n}u.prototype.trigger=function(t){var e=Array.prototype.slice.call(arguments,1);return this.applyHandler(t,e)};u.prototype.applyHandler=function(t,e){var r=this.update_queued;this.update_queued=true;this.handlers[t].apply(this,e);if(!r){this.update()}};e.bind=function(t,e,r,a){if(typeof t==="string"){t=document.getElementById(t)}var i=document.getElementById(e).content;var s=new u(t,i,r,a);var o=new n.Patcher(t);var f={bound_template:s,patcher:o,text_buffer:""};s.update=function(){var t=this.data;var e=null;o.start();this.template.render(f,t,e);o.end();this.update_queued=false};s.update();return s};e.initTemplates=function(){var t=document.getElementsByTagName("template");for(var e=0,r=t.length;e<r;e++){var n=t[e].content;a.markTemplatePaths(n);var u=i.compileChildren(n);n.render_children=u;n.render=i.wrapTemplate(u)}};e.BoundTemplate=u},function(t,e,r){var n=r(2);var a=r(4);var i=r(5);var u=1;var s=3;function o(t,e,r){return(t.tagName===e||t.nodeType===s&&e==="#text")&&t.key==r}function f(t,e,r,n){if(e&&o(e,r,n)){return e}if(n&&t.keymap){return t.keymap[n]||null}return null}function l(t,e,r){while(r){var n=r;r=r.nextSibling;t.removeChild(e,n)}}function c(t,e){var r=e.attributes;var n=[];var a,i;for(a=0,i=r.length;a<i;a++){var u=r[a];if(!e.visited_attributes.has(u.name)){n.push(u.name)}}for(a=0,i=n.length;a<i;a++){t.removeAttribute(e,n[a]);if(n[a]==="value"){t.removeEventListener(e,"input",y)}}}function h(t,e){if(!e.handlers){return}for(var r in e.handlers){if(!e.visited_events.has(r)){t.removeEventListener(e,r,e.handlers[r]);delete e.handlers[r]}}}function v(t,e){this.container=t;this.parent=null;this.current=null;this.transforms=e||n}e.Patcher=v;v.prototype.start=function(){this.stepInto(this.container)};v.prototype.stepInto=function(t){t.visited_attributes=new i;t.visited_events=new i;this.parent=t;this.current=t.firstChild};v.prototype.enterTag=function(t,e){var r=f(this.parent,this.current,t,e);if(!r){r=this.transforms.insertElement(this.parent,this.current,t);if(e){if(!this.parent.keymap){this.parent.keymap={}}this.parent.keymap[e]=r;r.key=e}}else if(!this.current){this.transforms.appendChild(this.parent,r)}else if(r!==this.current){this.transforms.replaceChild(this.parent,r,this.current)}this.stepInto(r)};function p(t){return function(e){var r=e.target;var n=r.handlers[t];if(n.name){var i=n.args.map(function(t){if(t.length==1&&t[0]=="event"){return e}return a.lookup(r.data,t)});r.bound_template.applyHandler(n.name,i)}if(r.tagName==="INPUT"){var u=r.getAttribute("type");if(t=="change"){if(u==="checkbox"){m(e)}else if(u==="radio"){g(e)}}else if(t=="input"&&r.hasAttribute("value")){y(e)}}else if(r.tagName==="SELECT"){b(e)}}}function d(t,e){if(!t.handlers){t.handlers={}}if(!t.handlers.hasOwnProperty(e)){var r=p(e);t.handlers[e]={fn:r};t.addEventListener(e,r)}}v.prototype.eventListener=function(t,e,r,n){var i=this.parent;if(i.data!==r){i.data=r}if(i.bound_template!==n){i.bound_template=n}d(i,t);var u=i.handlers[t];if(u.value!==e){u.value=e;var s=e.indexOf("(");var o=e.lastIndexOf(")");u.name=e.substring(0,s);var f=e.substring(s+1,o).split(",");u.args=f.map(function(t){return a.propertyPath(a.trim(t))})}i.visited_events.add(t)};function m(t){var e=t.target;if(e.dataset["managed"]==="true"){e.checked=e.hasAttribute("checked")}}function g(t){var e=t.target;if(e.dataset["managed"]==="true"){var r=e.hasAttribute("checked");if(e.checked!=r){if(e.name){var n=document.getElementsByName(e.name);for(var a=0,i=n.length;a<i;a++){var u=n[a];u.checked=u.hasAttribute("checked")}}else{e.checked=r}}}}function b(t){var e=t.target;if(e.dataset["managed"]==="true"){var r=e.getElementsByTagName("option");for(var n=0,a=r.length;n<a;n++){var i=r[n];i.selected=i.hasAttribute("selected")}}}function y(t){var e=t.target;if(e.dataset["managed"]==="true"){var r=e.getAttribute("value");if(e.value!==r){e.value=r}}}v.prototype.attribute=function(t,e){var r=this.parent;if(r.getAttribute(t)!==e){this.transforms.setAttribute(r,t,e)}r.visited_attributes.add(t)};v.prototype.text=function(t){var e=f(this.parent,this.current,"#text",null);if(!e){e=this.transforms.insertTextNode(this.parent,this.current,t)}else if(e.textContent!==t){this.transforms.replaceText(e,t)}this.current=e.nextSibling};function k(t,e){return t.handlers&&t.handlers[e]&&t.handlers[e].fn}v.prototype.exitTag=function(){l(this.transforms,this.parent,this.current);var t=this.parent;this.parent=t.parentNode;this.current=t.nextSibling;c(this.transforms,t);h(this.transforms,t);if(t.tagName==="INPUT"){var e=t.getAttribute("type");if((e==="checkbox"||e=="radio")&&!k(t,"change")){d(t,"change")}else if(t.hasAttribute("value")&&!k(t,"input")){d(t,"input")}}else if(t.tagName==="SELECT"){d(t,"change")}};v.prototype.skip=function(t,e){var r=f(this.parent,this.current,t,e);if(!this.current){this.transforms.appendChild(this.parent,r)}else if(r!==this.current){this.transforms.replaceChild(this.parent,r,this.current)}this.current=r.nextSibling};v.prototype.end=function(t){l(this.transforms,this.parent,this.current);this.parent=null}},function(t,e,r){var n=r(3);e.insertTextNode=function(t,e,r){var n=document.createTextNode(r);t.insertBefore(n,e);return n};e.replaceText=function(t,e){t.textContent=e;return t};e.replaceChild=function(t,e,r){t.replaceChild(e,r);return e};e.appendChild=function(t,e){t.appendChild(e);return e};e.insertElement=function(t,e,r){var n=document.createElement(r);t.insertBefore(n,e);return n};e.removeChild=function(t,e){t.removeChild(e);return e};e.setAttribute=function(t,e,r){if(n.attributes[e]&n.USE_PROPERTY){t[e]=r}t.setAttribute(e,r);return t};e.removeAttribute=function(t,e){if(n.attributes[e]&n.USE_PROPERTY){t[e]=false}t.removeAttribute(e);return t};e.addEventListener=function(t,e,r){t.addEventListener(e,r,false);return t};e.removeEventListener=function(t,e,r){t.removeEventListener(e,r);return t}},function(t,e){var r=e.BOOLEAN_ATTRIBUTE=1;var n=e.USE_PROPERTY=2;e.attributes={checked:r|n,selected:r|n,value:n}},function(t,e){var r=1;var n=3;var a=11;e.isDocumentFragment=function(t){return t.nodeType===a};e.isElementNode=function(t){return t.nodeType===r};e.isTextNode=function(t){return t.nodeType===n};e.eachNode=function(t,e){var r=0;var n=t[0];while(n){var a=n;n=n.nextSibling;e(a,r++,t)}};e.mapNodes=function(t,r){var n=[];e.eachNode(t,function(e,a){n[a]=r(e,a,t)});return n};e.trim=function(t){return t.replace(/^\s+|\s+$/g,"")};e.propertyPath=function(t){return t.split(".").filter(function(t){return t})};e.lookup=function(t,e){var r=t;for(var n=0,a=e.length;n<a;n++){if(r===undefined||r===null){return""}r=r[e[n]]}return r===undefined||r===null?"":r};e.templateTagName=function(t){var e=/^TEMPLATE-([^\s/>]+)/.exec(t.tagName);return e&&e[1].toLowerCase()}},function(t,e){function r(){this.values=[]}r.prototype.add=function(t){this.values.push(t)};r.prototype.has=function(t){return this.values.indexOf(t)!==-1};t.exports=window.Set||r},function(t,e,r){var n=r(4);e.markPath=function(t,e){switch(e.length){case 0:return;case 1:t[e[0]]=true;return;default:for(var r=0,n=e.length-2;r<n;r++){var a=e[r];if(t[a]===true){return}if(t[a]===undefined){t[a]={}}t=t[a]}if(t[e[r]]){t[e[r]]=true}else{var i={};i[e[r+1]]=true;t[e[r]]=i}}};e.mergePaths=function(t,r){for(var n in r){if(t[n]===true){continue}else if(r[n]===true){t[n]=true}else if(!t[n]){t[n]=r[n]}else{if(Object.keys(t[n])[0]==Object.keys(r[n])[0]){e.mergePaths(t[n],r[n])}else{t[n]=true}}}};e.equivalentPathObjects=function(t,r){var n=Object.keys(t);var a=Object.keys(r);if(n.length!==a.length){return false}n.sort();a.sort();for(var i=n.length-1;i>=0;i--){if(n[i]!==a[i]){return false}}for(i=n.length-1;i>=0;i--){var u=n[i];var s=t[u];var o=r[u];if(s===true&&o===true){continue}else if(s===true||o===true){return false}else if(!e.equivalentPathObjects(t[u],r[u])){return false}}return true};e.stringPaths=function(t){var r={};var a=t.match(/{{\s*([^}]+?)\s*}}/g);if(a){a.forEach(function(t){e.markPath(r,n.propertyPath(t.replace(/^{{\s*|\s*}}$/g,"")))})}return r};function a(t,r){var a=false;var i=n.mapNodes(r.childNodes,o);for(var u=0,s=i.length;u<s;u++){var f=i[u];if(!f){a=true;break}e.mergePaths(t,f)}n.eachNode(r.childNodes,function(r,n){var u=i[n];if(u&&Object.keys(u).length===0){r.static=true}else if(a||!e.equivalentPathObjects(u,t)){r.active_paths=u}});return a?false:t}e.elementPaths=function(t){var r={};var i=null;var u;if(t.attributes){for(var s=0,o=t.attributes.length;s<o;s++){var f=t.attributes[s];if(f.name=="data-each"){var l=f.value.split(" in ");if(l.length<2){throw new Error("Badly formed data-each attribute value: "+f.value)}u=n.propertyPath(l[1]);e.markPath(r,u);i=l[0]}if(f.name=="data-if"){u=n.propertyPath(f.value);e.markPath(r,u)}else if(f.name=="data-unless"){u=n.propertyPath(f.value);e.markPath(r,u)}else{e.mergePaths(r,e.stringPaths(f.value))}}}r=a(r,t);if(i){delete r[i]}return r};function i(t){var r={};for(var i=0,u=t.attributes.length;i<u;i++){var s=t.attributes[i];if(s.name==="template"){e.mergePaths(r,e.stringPaths(s.value))}else{e.markPath(r,n.propertyPath(s.value))}}r=a(r,t);return r}function u(t){return false}var s={call:i,children:u};function o(t){if(n.isTextNode(t)){return e.stringPaths(t.textContent)}else{var r=n.templateTagName(t);if(r){var a=s[r];if(!a){throw new Error("Unknown template tag: "+t.tagName)}return a(t)}else if(n.isElementNode(t)||n.isDocumentFragment(t)){return e.elementPaths(t)}}return false}e.markTemplatePaths=function(t){var e=o(t);t.static=e&&Object.keys(e).length===0;t.active_paths=e}},function(t,e,r){var n=r(3);var a=r(4);function i(t){var e=t.filter(function(t){return t});var r=e.length;return function(t,n,a,i){var u=-1;while(++u<r){e[u](t,n,a,i)}}}function u(t){if(t.text_buffer){t.patcher.text(t.text_buffer);t.text_buffer=""}}function s(t,e){var r=t.split(/{{|}}/);var n=r.length;var i=-1;while(++i<n){if(i%2){var u=a.propertyPath(a.trim(r[i]));r[i]=u}}if(n==1&&!r[0]&&e){return function(){return true}}else if(n==3&&!r[0]&&!r[2]){return function(t){return a.lookup(t,r[1])}}return function(t){var e="";var i=-1;while(++i<n){e+=i%2?a.lookup(t,r[i]):r[i]}return e}}function o(t){var e=t.textContent;var r=s(e);return function(t,e,n,a){t.text_buffer+=r(e)}}function f(t){var r=e.compileChildren(t);var a=null;if(t.dataset.key){a=s(t.dataset.key)}var i={};var o={};for(var f=0,l=t.attributes.length;f<l;f++){var p=t.attributes[f];var d=p.name;if(d=="data-each"||d=="data-if"||d=="data-unless"||d=="data-key"){continue}var m=d.match(/^on(.*)/,m);if(m){var g=m[1];i[g]=p.value}else{o[d]=s(p.value,n.attributes[d]&n.BOOLEAN_ATTRIBUTE)}}var b=function(e,s,f,l){var c=a?a(s):null;u(e);e.patcher.enterTag(t.tagName,c);for(var h in o){var v=o[h](s);if(v||!(n.attributes[h]&n.BOOLEAN_ATTRIBUTE)){e.patcher.attribute(h,v)}}for(var p in i){e.patcher.eventListener(p,i[p],s,e.bound_template)}r(e,s,f,l);u(e);e.patcher.exitTag()};if(t.dataset.unless){b=c(t,b)}if(t.dataset.if){b=h(t,b)}if(t.dataset.each){b=v(t,b)}return b}function l(t){if(Array.isArray(t)){return t.length>0}return t}function c(t,e){var r=a.propertyPath(t.dataset.unless);return function(t,n,i,u){if(!l(a.lookup(n,r))){e(t,n,i,u)}}}function h(t,e){var r=a.propertyPath(t.dataset.if);return function(t,n,i,u){if(l(a.lookup(n,r))){e(t,n,i,u)}}}function v(t,e){var r=t.dataset.each.split(" in ");var n=r[0];var i=a.propertyPath(r[1]);return function(t,r,u,s){var o=a.lookup(r,i);var f=a.lookup(u,i);var l=o.length;var c=-1;while(++c<l){var h=Object.assign({},r);var v=Object.assign({},u);h[n]=o[c];v[n]=f&&f[c];e(t,h,v,s)}}}function p(t){var r=t.getAttribute("template");if(!r){throw new Error("<template-call> tags must include a 'template' attribute")}var n=s(r);var i=e.compileChildren(t);return function(e,r,u,s){var o=n(r);var f=document.getElementById(o);if(!f){throw new Error("Template not found: '"+o+"'")}var l={};var c={};for(var h=0,v=t.attributes.length;h<v;h++){var p=t.attributes[h].name;if(p!=="template"){var d=a.propertyPath(t.attributes[h].value);l[p]=a.lookup(r,d);c[p]=a.lookup(u,d)}}var m=this;f.content.render_children(e,l,c,function(){i(e,r,u,s)})}}function d(t){if(a.isTextNode(t)){return o(t)}else if(a.isElementNode(t)){var e=a.templateTagName(t);if(e){if(e=="call"){return p(t)}else if(e=="children"){return function(t,e,r,n){n&&n()}}throw new Error("Unkonwn template tag: <template-"+e+">")}return f(t)}return null}e.compileChildren=function(t){return i(a.mapNodes(t.childNodes,d))};e.wrapTemplate=function(t){return function(e,r,n,a){e.patcher.start();t(e,r,n,a);u(e);e.patcher.end()}}}]);