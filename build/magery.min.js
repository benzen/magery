var Magery=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:false};t[r].call(i.exports,i,i.exports,n);i.loaded=true;return i.exports}n.m=t;n.c=e;n.p="";return n(0)}([function(t,e,n){var r=n(1).Patcher;var i=n(6).eval;e.Template=n(7);e.compile=function(t,n){n=n||{};if(typeof t==="string"){return e.compile(document.querySelectorAll(t),n)}if(t instanceof NodeList){for(var r=0,a=t.length;r<a;r++){e.compile(t[r],n)}return n}if(t.tagName==="TEMPLATE"&&t.content){return e.compile(t.content,n)}var o=i(t);for(var s in o){n[s]=o[s]}return n};e.patch=function(t,e,n,i){new r(i).render(t,e,n)}},function(t,e,n){var r=n(2);var i=n(4);var a=n(3);var o=n(5);var s=1;var u=3;function l(t,e,n){return(t.tagName===e||t.nodeType===u&&e==="#text")&&t.key==n}function p(t,e,n,r){if(e&&l(e,n,r)){return e}if(r&&t.keymap){return t.keymap[r]||null}return null}function f(t,e,n){while(n){var r=n;n=n.nextSibling;t.removeChild(e,r)}}function c(t,e){var n=e.attributes;var r=[];var i,a;for(i=0,a=n.length;i<a;i++){var o=n[i];if(!e.visited_attributes.has(o.name)){r.push(o.name)}}for(i=0,a=r.length;i<a;i++){t.removeAttribute(e,r[i])}}function d(t,e){if(!e.bound_events){return}for(var n in e.bound_events){if(!e.visited_events.has(n)){t.removeEventListener(e,n,e.bound_events[n].fn);delete e.bound_events[n]}}}function h(t,e){this.transforms=e||r;this.root=t;this.reset()}e.Patcher=h;h.prototype.reset=function(){this.parent=this.root.parentNode;this.current=this.root};h.prototype.stepInto=function(t){if(t.visited_attributes){t.visited_attributes.clear()}else{t.visited_attributes=new o}if(t.visited_events){t.visited_events.clear()}else{t.visited_events=new o}this.parent=t;this.current=t.firstChild};h.prototype.enterTag=function(t,e){var n=p(this.parent,this.current,t,e);if(!n){n=this.transforms.insertElement(this.parent,this.current,t);if(e){if(!this.parent.keymap){this.parent.keymap={}}this.parent.keymap[e]=n;n.key=e}}else if(!this.current){this.transforms.appendChild(this.parent,n)}else if(n!==this.current){this.transforms.replaceChild(this.parent,n,this.current)}if(!this.template_root){this.template_root=n}this.stepInto(n)};h.prototype.EVENT={};function m(t,e){return function(n){var r=t.bound_events[e];if(r.path){var a=r.args.map(function(t){if(t===h.prototype.EVENT){return n}return t});var o=i.lookup(t.handlers,r.path);if(!o){throw new Error("on"+e+": no '"+r.path.join(".")+"' handler defined")}o.apply(r.template_root,a)}}}function v(t,e){if(!t.bound_events){t.bound_events={}}if(!t.bound_events.hasOwnProperty(e)){var n=m(t,e);t.bound_events[e]={fn:n};r.addEventListener(t,e,n)}t.visited_events.add(e)}h.prototype.eventListener=function(t,e,n,r){var i=this.parent;if(i.handlers!==r){i.handlers=r}v(i,t);var a=i.bound_events[t];a.path=e;a.args=n;a.template_root=this.template_root};h.prototype.attribute=function(t,e){var n=this.parent;if(n.getAttribute(t)!==e){this.transforms.setAttribute(n,t,e)}n.visited_attributes.add(t)};h.prototype.text=function(t){var e=p(this.parent,this.current,"#text",null);if(!e){e=this.transforms.insertTextNode(this.parent,this.current,t)}else if(e.textContent!==t){this.transforms.replaceText(e,t)}this.current=e.nextSibling};function g(t,e){return t.bound_events&&t.bound_events[e]&&t.bound_events[e].fn}h.prototype.exitTag=function(){f(this.transforms,this.parent,this.current);var t=this.parent;this.parent=t.parentNode;this.current=t.nextSibling;c(this.transforms,t);d(this.transforms,t)};h.prototype.skip=function(t,e){var n=p(this.parent,this.current,t,e);if(!this.current){this.transforms.appendChild(this.parent,n)}else if(n!==this.current){this.transforms.replaceChild(this.parent,n,this.current)}this.current=n.nextSibling};h.prototype.lookup=i.lookup;h.prototype.isTruthy=function(t){if(Array.isArray(t)){return t.length>0}return t};h.prototype.each=function(t,e,n,r){for(var a=0,o=n.length;a<o;a++){var s=i.shallowClone(t);s[e]=n[a];r(s)}};h.prototype.render=function(t,e,n,r,i,a,o){if(!t[e]){this.enterTag(e.toUpperCase(),null);this.exitTag();return}var s=t[e];if(s._render){var u=this.template_root;this.template_root=null;s._render.call(t,this,n,r,i,a,o);this.template_root=u}else{this.enterTag(e.toUpperCase(),null);s(this.parent,n,r,o);this.exitTag()}};h.prototype.wrapChildren=function(t){var e=this;return function(n){if(n){var r=new h(n);r.parent=n;r.current=n.firstChild;t(r)}else{t(e)}}}},function(t,e,n){var r=n(3);e.insertTextNode=function(t,e,n){var r=document.createTextNode(n);t.insertBefore(r,e);return r};e.replaceText=function(t,e){t.textContent=e;return t};e.replaceChild=function(t,e,n){t.replaceChild(e,n);return e};e.appendChild=function(t,e){t.appendChild(e);return e};e.insertElement=function(t,e,n){var r=document.createElement(n);t.insertBefore(r,e);return r};e.removeChild=function(t,e){t.removeChild(e);return e};e.setAttribute=function(t,e,n){if(r.attributes[e]&r.USE_PROPERTY){t[e]=n}t.setAttribute(e,n);return t};e.removeAttribute=function(t,e){if(r.attributes[e]&r.USE_PROPERTY){t[e]=false}t.removeAttribute(e);return t};e.addEventListener=function(t,e,n){t.addEventListener(e,n,false);return t};e.removeEventListener=function(t,e,n){t.removeEventListener(e,n);return t}},function(t,e){var n=e.BOOLEAN_ATTRIBUTE=1;var r=e.USE_PROPERTY=2;var i=e.USE_STRING=4;e.attributes={allowfullscreen:n,async:n,autofocus:n,autoplay:n,capture:n,checked:n|r,controls:n,default:n,defer:n,disabled:n,formnovalidate:n,hidden:n,itemscope:n,loop:n,multiple:n|r,muted:n|r,novalidate:n,open:n,readonly:n,required:n,reversed:n,selected:n|r,value:r|i}},function(t,e){var n=1;var r=3;var i=11;e.isDocumentFragment=function(t){return t.nodeType===i};e.isElementNode=function(t){return t.nodeType===n};e.isTextNode=function(t){return t.nodeType===r};e.eachNode=function(t,e){var n=0;var r=t[0];while(r){var i=r;r=r.nextSibling;e(i,n++,t)}};e.mapNodes=function(t,n){var r=[];e.eachNode(t,function(e,i){r[i]=n(e,i,t)});return r};e.trim=function(t){return t.replace(/^\s+|\s+$/g,"")};e.propertyPath=function(t){return t.split(".").filter(function(t){return t})};e.lookup=function(t,e){var n=t;for(var r=0,i=e.length;r<i;r++){if(n===undefined||n===null){return""}n=n[e[r]]}return n===undefined||n===null?"":n};e.templateTagName=function(t){var e=/^TEMPLATE-([^\s/>]+)/.exec(t.tagName);return e&&e[1].toLowerCase()};e.shallowClone=function(t){var e={};for(var n in t){e[n]=t[n]}return e};e.eachAttribute=function(t,e){var n=t.attributes;for(var r=0,i=t.attributes.length;r<i;r++){e(t.attributes[r].name,t.attributes[r].value)}}},function(t,e){if(typeof Set==="undefined"){function n(){this.values=[]}n.prototype.add=function(t){this.values.push(t)};n.prototype.has=function(t){return this.values.indexOf(t)!==-1};n.prototype.clear=function(){this.values=[]};t.exports=n}else{t.exports=Set}},function(module,exports,__webpack_require__){var utils=__webpack_require__(4);var html=__webpack_require__(3);var make_template=__webpack_require__(7).make_template;var IGNORED_ATTRS=["data-tagname","data-each","data-if","data-unless","data-key"];function compileLookup(t){return"p.lookup(data, "+JSON.stringify(t)+")"}function compileTemplateContext(t){var e=[];utils.eachAttribute(t,function(t,n){if(IGNORED_ATTRS.indexOf(t)===-1){e.push(JSON.stringify(t)+": "+compileExpandVariables(n))}});return"{"+e.join(", ")+"}"}function compileListener(t,e){var n=e.indexOf("(");var r=e.lastIndexOf(")");var i=e.substring(0,n);var a=e.substring(n+1,r).split(",");var o=[];for(var s=0,u=a.length;s<u;s++){var l=utils.trim(a[s]);if(!l){continue}if(l==="event"){o.push("p.EVENT")}else{o.push(compileLookup(utils.propertyPath(l)))}}return"p.eventListener("+JSON.stringify(t)+", "+JSON.stringify(i.split("."))+", "+"["+o.join(", ")+"], "+"handlers);\n"}function compileExtraAttrs(t){var e="";utils.eachAttribute(t,function(t,n){var r=t.match(/^on(.*)/);if(r){e+=compileListener(r[1],n)}});return e}function compileElement(t,e,n,r){if(t.tagName==="TEMPLATE-EMBED"){return}if(t.tagName==="TEMPLATE-CHILDREN"){n("inner();\n");return}if(!r&&t.tagName==="TEMPLATE"&&t.dataset.tagname){e.push(t);return}if(t.dataset.each){var i=t.dataset.each.split(/\s+in\s+/);var a=i[0];var o=utils.propertyPath(i[1]);n("p.each("+"data, "+JSON.stringify(a)+", "+compileLookup(o)+", "+"function (data) {\n")}if(t.dataset.if){var s=utils.propertyPath(t.dataset.if);n("if (p.isTruthy("+compileLookup(s)+")) {\n")}if(t.dataset.unless){var u=utils.propertyPath(t.dataset.unless);n("if (!p.isTruthy("+compileLookup(u)+")) {\n")}var l=t.tagName=="TEMPLATE"?t.content.childNodes:t.childNodes;var p=true;if(t.tagName=="TEMPLATE-CALL"){n("p.render("+"templates"+", "+compileExpandVariables(t.getAttribute("template"))+", "+compileTemplateContext(t)+", handlers"+", "+(t.dataset.key?compileExpandVariables(t.dataset.key):"null")+", function () {"+compileExtraAttrs(t)+"}"+(l.length?", p.wrapChildren(function (p) {":");")+"\n");p=false}else if(t.tagName.indexOf("-")!==-1){n("p.render("+"templates"+", "+JSON.stringify(t.tagName.toLowerCase())+", "+compileTemplateContext(t)+", handlers"+", "+(t.dataset.key?compileExpandVariables(t.dataset.key):"null")+", function () {"+compileExtraAttrs(t)+"}"+(l.length?", p.wrapChildren(function (p) {":");")+"\n");p=false}else{var f=t.tagName;if(f==="TEMPLATE"&&t.dataset.tagname){f=t.dataset.tagname.toUpperCase()}if(r){if(t.dataset.key){n("p.enterTag("+JSON.stringify(f)+", "+"root_key || "+compileExpandVariables(t.dataset.key)+");\n")}else{n("p.enterTag("+JSON.stringify(f)+", root_key || null);\n")}}else if(t.dataset.key){n("p.enterTag("+JSON.stringify(f)+", "+compileExpandVariables(t.dataset.key)+");\n")}else{n("p.enterTag("+JSON.stringify(f)+", null);\n")}utils.eachAttribute(t,function(t,e){if(t==="data-template"){t="data-bind"}if(IGNORED_ATTRS.indexOf(t)!==-1){return}var r=t.match(/^on(.*)/);if(r){n(compileListener(r[1],e))}else if(html.attributes[t]&html.BOOLEAN_ATTRIBUTE){if(e===""){n("p.attribute("+JSON.stringify(t)+", true);\n")}else{n("if (p.isTruthy("+compileExpandVariables(e)+")) {\n");n("p.attribute("+JSON.stringify(t)+", true);\n");n("}\n")}}else{n("p.attribute("+JSON.stringify(t)+", "+compileExpandVariables(e)+");\n")}});if(r){n("if (extra_attrs) { extra_attrs(); }\n")}}utils.eachNode(l,function(t){compileNode(t,e,n,false)});if(p){n("p.exitTag();\n")}else if(l.length){n("}));\n")}if(t.dataset.unless){n("}\n")}if(t.dataset.if){n("}\n")}if(t.dataset.each){n("});\n")}}function compileExpandVariables(t,e){var n=t.split(/{{\s*|\s*}}/);var r=n.length;var i=-1;while(++i<r){if(i%2){var a=utils.propertyPath(n[i]);n[i]=a}}if(r==1&&!n[0]&&e){return"true"}var o=[];var s=-1;while(++s<r){if(n[s].length){o.push(s%2?compileLookup(n[s]):JSON.stringify(n[s]))}}if(!o.length){return JSON.stringify("")}return o.join(" + ")}function compileText(t,e){var n=compileExpandVariables(t.textContent);if(n[0]==='"'){e("p.text("+n+");\n")}else{e('p.text("" + '+n+");\n")}}function compileDocumentFragment(t,e,n){utils.eachNode(t.childNodes,function(t){compileNode(t,e,n,false)})}function compileNode(t,e,n,r){switch(t.nodeType){case 1:compileElement(t,e,n,r);break;case 3:compileText(t,n);break;case 11:compileDocumentFragment(t,e,n);break}}function ignore_output(t){}exports.compile=function(t,e){var n=[];compileNode(t,n,ignore_output,!(t.tagName=="TEMPLATE"&&t.dataset&&t.dataset.hasOwnProperty("tagname")));e("({\n");while(n.length){t=n.shift();if(t.dataset.tagname.indexOf("-")===-1){throw new Error("Error compiling template '"+t.dataset.tagname+"': data-tagname must include a hyphen")}e(JSON.stringify(t.dataset.tagname)+": ");e("make_template("+"function (p, data, handlers, root_key, extra_attrs, inner) {\n");e("var templates = this;\n");compileNode(t,n,e,true);e("})"+(n.length?",":"")+"\n")}e("})\n")};exports.compileToString=function(t){var e="(function (make_template) { return ";exports.compile(t,function(t){e+=t});return e+"})"};exports.eval=function(node){return eval(exports.compileToString(node))(make_template)}},function(t,e,n){var r=n(1).Patcher;e.make_template=function(t){var e=function(e,n,i){var a=new r(e);return t.call(this,a,n,i)};e._render=t;return e}}]);